{% extends 'mainpage/base.html' %}

{% load static %}

{% block title %}ОХЛ | {{ team.name }}{% endblock title %}

{% block head %}
<link rel="stylesheet" href="{% static 'players/css/components.css' %}">
<link rel="stylesheet" href="{% static 'mainpage/css/style.css' %}">
<link rel="stylesheet" href="{% static 'teams/css/team-profile.css' %}">
<script src="https://code.iconify.design/1/1.0.6/iconify.min.js"></script>
{% endblock head %}

{% block main %}
<main>
    <article>
        <section class="page-heading">
            <h1>Объединённая Хоккейная Лига "Кубок Грифонов"</h1>
        </section>
    </article>

    <section class="team-promo">
        <div class="promo">
            <div class="promo-avatar">
                <img src="{{ team.logo.url }}" alt="svg: logo">
            </div>

            <div class="promo-info">
                <div class="promo-title">
                    <h3 class="club-name">Спортивный клуб "<span>{{ team.name }}</span>"</h3>
                    <div class="promo-stats">
                        {% for match in last_home_mathces %}
                            {% if match.score_hometeam > match.score_awayteam %}
                            <div class="circle green"></div>
                            {% elif match.score_hometeam < match.score_awayteam %}
                            <div class="circle red"></div>
                            {% else %}
                            <div class="circle yellow"></div>
                            {% endif %}
                        {% endfor %}
                        {% for match in last_away_matches %}
                            {% if match.score_awayteam > match.score_hometeam %}
                            <div class="circle green"></div>
                            {% elif match.score_awayteam < match.score_hometeam %}
                            <div class="circle red"></div>
                            {% else %}
                            <div class="circle yellow"></div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                <div class="promo-country">
                    <img src="{{ team.country.flag }}" alt="BY icon">
                    <div>{{ team.location }}</div>
                </div>
                <div class="promo-year">
                    <div class="promo-year_label">Год основания</div>
                    <div class="promo-year_content">
                        <img src="/pictures/Activity.svg" alt="Activity icon">
                        <div>{{ team.year_of_foundation }}</div>
                    </div>
                </div>
                <div class="promo-capitan">
                    <div class="promo-capitan_label">Капитан</div>
                    <div class="promo-capitan_content">
                        {% for player in captain %}
                        <img src="{{ player.citizenship.flag }}" alt="BY icon">
                        <div><a href="{{ player.get_absolute_url }}">{{ player.name }} {{ player.surname }}</a></div>
                        {% endfor %}
                    </div>
                </div>
                <div class="promo-trainer">
                    <div class="promo-trainer_label">Тренер</div>
                    <div class="promo-trainer_content">
                        <img src="{{ team.trainer.citizenship.flag }}" alt="RU icon">
                        <div>{{ team.trainer }}</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="selections">
        <button data-id="0" class="selection-btn teamlist btn-active">
            <div class="teamlist-icon_block">
                <svg width="29" height="27" viewBox="0 0 29 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path class="team-icon" d="M18.4933 10.2578C19.894 10.2578 21.0308 11.4067 21.0308 12.8223V19.7815C21.0308 21.5308 20.3432 23.2085 19.1192 24.4455C17.8953 25.6824 16.2353 26.3773 14.5044 26.3773C12.7734 26.3773 11.1134 25.6824 9.88945 24.4455C8.66551 23.2085 7.9779 21.5308 7.9779 19.7815V12.8223C7.9779 11.4067 9.11325 10.2578 10.5154 10.2578H18.4933V10.2578ZM18.4933 12.456H10.5154C10.4193 12.456 10.3271 12.4946 10.2591 12.5633C10.1911 12.632 10.1529 12.7251 10.1529 12.8223V19.7815C10.1529 20.9479 10.6114 22.0664 11.4274 22.8912C12.2435 23.7159 13.3503 24.1792 14.5044 24.1792C15.6584 24.1792 16.7652 23.7159 17.5813 22.8912C18.3973 22.0664 18.8558 20.9479 18.8558 19.7815V12.8223C18.8558 12.7251 18.8176 12.632 18.7496 12.5633C18.6816 12.4946 18.5894 12.456 18.4933 12.456V12.456ZM2.5375 10.2578H7.43995C6.92839 10.8822 6.61597 11.6486 6.54385 12.456H2.5375C2.44136 12.456 2.34916 12.4946 2.28117 12.5633C2.21319 12.632 2.175 12.7251 2.175 12.8223V17.5834C2.17491 18.1372 2.29898 18.6837 2.5379 19.1821C2.77681 19.6804 3.12436 20.1176 3.55443 20.4607C3.9845 20.8038 4.48592 21.044 5.02101 21.1631C5.5561 21.2823 6.11096 21.2774 6.6439 21.1487C6.76715 21.8873 6.9919 22.5922 7.30075 23.2472C6.44131 23.4796 5.5405 23.5091 4.66798 23.3334C3.79546 23.1577 2.9746 22.7816 2.26888 22.2341C1.56317 21.6866 0.991494 20.9825 0.598072 20.176C0.204649 19.3696 1.78347e-05 18.4825 0 17.5834V12.8223C0 11.4067 1.1368 10.2578 2.5375 10.2578ZM21.5688 10.2578H26.4625C27.8632 10.2578 29 11.4067 29 12.8223V17.5849C29.0002 18.4834 28.796 19.37 28.4032 20.176C28.0103 20.9821 27.4394 21.6861 26.7345 22.2337C26.0295 22.7812 25.2095 23.1577 24.3377 23.3339C23.4658 23.5102 22.5656 23.4815 21.7065 23.2501C22.0168 22.5936 22.2415 21.8888 22.3662 21.1502C22.8985 21.2773 23.4524 21.2811 23.9863 21.1612C24.5202 21.0413 25.0203 20.8009 25.4493 20.4579C25.8782 20.1149 26.2247 19.6783 26.463 19.1808C26.7012 18.6832 26.825 18.1376 26.825 17.5849V12.8223C26.825 12.7251 26.7868 12.632 26.7188 12.5633C26.6508 12.4946 26.5586 12.456 26.4625 12.456H22.4649C22.3927 11.6486 22.0803 10.8822 21.5688 10.2578ZM14.5 0C15.6537 0 16.7601 0.463172 17.5759 1.28762C18.3917 2.11207 18.85 3.23027 18.85 4.39622C18.85 5.56217 18.3917 6.68037 17.5759 7.50482C16.7601 8.32927 15.6537 8.79244 14.5 8.79244C13.3463 8.79244 12.2399 8.32927 11.4241 7.50482C10.6083 6.68037 10.15 5.56217 10.15 4.39622C10.15 3.23027 10.6083 2.11207 11.4241 1.28762C12.2399 0.463172 13.3463 0 14.5 0V0ZM23.925 1.46541C24.8864 1.46541 25.8084 1.85138 26.4883 2.53843C27.1681 3.22547 27.55 4.1573 27.55 5.12892C27.55 6.10055 27.1681 7.03238 26.4883 7.71942C25.8084 8.40646 24.8864 8.79244 23.925 8.79244C22.9636 8.79244 22.0416 8.40646 21.3617 7.71942C20.6819 7.03238 20.3 6.10055 20.3 5.12892C20.3 4.1573 20.6819 3.22547 21.3617 2.53843C22.0416 1.85138 22.9636 1.46541 23.925 1.46541ZM5.075 1.46541C6.03641 1.46541 6.95844 1.85138 7.63826 2.53843C8.31808 3.22547 8.7 4.1573 8.7 5.12892C8.7 6.10055 8.31808 7.03238 7.63826 7.71942C6.95844 8.40646 6.03641 8.79244 5.075 8.79244C4.11359 8.79244 3.19156 8.40646 2.51174 7.71942C1.83192 7.03238 1.45 6.10055 1.45 5.12892C1.45 4.1573 1.83192 3.22547 2.51174 2.53843C3.19156 1.85138 4.11359 1.46541 5.075 1.46541V1.46541ZM14.5 2.19811C13.9232 2.19811 13.3699 2.4297 12.962 2.84192C12.5542 3.25415 12.325 3.81325 12.325 4.39622C12.325 4.9792 12.5542 5.53829 12.962 5.95052C13.3699 6.36274 13.9232 6.59433 14.5 6.59433C15.0768 6.59433 15.6301 6.36274 16.038 5.95052C16.4458 5.53829 16.675 4.9792 16.675 4.39622C16.675 3.81325 16.4458 3.25415 16.038 2.84192C15.6301 2.4297 15.0768 2.19811 14.5 2.19811ZM23.925 3.66352C23.5404 3.66352 23.1716 3.81791 22.8997 4.09272C22.6278 4.36754 22.475 4.74027 22.475 5.12892C22.475 5.51757 22.6278 5.8903 22.8997 6.16512C23.1716 6.43994 23.5404 6.59433 23.925 6.59433C24.3096 6.59433 24.6784 6.43994 24.9503 6.16512C25.2222 5.8903 25.375 5.51757 25.375 5.12892C25.375 4.74027 25.2222 4.36754 24.9503 4.09272C24.6784 3.81791 24.3096 3.66352 23.925 3.66352ZM5.075 3.66352C4.69044 3.66352 4.32162 3.81791 4.0497 4.09272C3.77777 4.36754 3.625 4.74027 3.625 5.12892C3.625 5.51757 3.77777 5.8903 4.0497 6.16512C4.32162 6.43994 4.69044 6.59433 5.075 6.59433C5.45956 6.59433 5.82838 6.43994 6.1003 6.16512C6.37223 5.8903 6.525 5.51757 6.525 5.12892C6.525 4.74027 6.37223 4.36754 6.1003 4.09272C5.82838 3.81791 5.45956 3.66352 5.075 3.66352Z" />
                </svg>
            </div>
            <div class="teamlist-title">
                <div>Состав команды</div>
            </div>
        </button>

        <button data-id="1" class="selection-btn match">
            <div class="match-icon_block">
                <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M23.1111 0H2.88889C2.12271 0 1.38791 0.304364 0.846136 0.846136C0.304364 1.38791 0 2.12271 0 2.88889V23.1111C0 23.8773 0.304364 24.6121 0.846136 25.1539C1.38791 25.6956 2.12271 26 2.88889 26H23.1111C23.8773 26 24.6121 25.6956 25.1539 25.1539C25.6956 24.6121 26 23.8773 26 23.1111V2.88889C26 2.12271 25.6956 1.38791 25.1539 0.846136C24.6121 0.304364 23.8773 0 23.1111 0ZM23.1111 23.1111H2.88889V2.88889H23.1111V23.1111ZM8.66667 20.2222H5.77778V13H8.66667V20.2222ZM14.4444 20.2222H11.5556V5.77778H14.4444V20.2222ZM20.2222 20.2222H17.3333V10.1111H20.2222V20.2222Z" fill="#7C7C7C"/>
                </svg>
            </div>
            <div class="match-title">
                <div>Матчи</div>
            </div>
        </button>
    </section>

    <section data-id="0" class="switch-table teamlist-section">
        <div class="table">
            <table width="100%">
                <thead>
                    <tr>
                        <th>Номер и фото</th>
                        <th>Игрок</th>
                        <th>Дата</th>
                        <th>Амплуа</th>
                    </tr>
                </thead>
                <tbody>
                    {% for player in players %}
                    <tr class="teamlist-row">
                        <td>
                            <div class="flex-line">
                                <div class="person-year">{{ player.number }}</div>
                                <img class="table-avatar" src="/pictures/avatar.svg" alt="Image: Avatar">
                            </div>
                        </td>
                        <td>
                            <div class="flex-line">
                                <img class="table-country" src="{{ player.citizenship.flag }}" alt="BY icon">
                                <div class="person-name"><a href="{{ player.get_absolute_url }}">{{ player.name }} {{ player.surname }}</a></div>
                            </div>
                        </td>
                        <td>{{ player.date_of_birth|date:"d.m.Y" }}</td>
                        <td>{{ player.position }}</td>
                    </tr>
                    {% endfor %%}
                </tbody>

            </table>
        </div>
    </section>

    <section data-id="1" class="switch-table matches">
        <div class="selection">
            <select class="select-season">
                <option value="1">За всё время</option>
                <option value="2">2021/2022</option>
            </select>
            <div class="arrow">
                <svg width="16" height="10" viewBox="0 0 16 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2 2L8 8.08704L14 2" stroke="#FF4957" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
        </div>
        <div class="table">

            <table width="100%">
                <thead>
                    <tr>
                        <th>Команды</th>
                        <th>Турнир</th>
                        <th>Дата</th>
                        <th>Счёт</th>
                    </tr>
                </thead>

                <tbody>
                    {% for match in home_matches %}
                        {% if match.score_hometeam > match.score_awayteam %}
                        <tr class="matches-row win">
                            <td class="team-name">
                                <div class="flex-line">
                                    <img class="rival-logo" src="{{ match.second_team.logo.url }}" alt="">
                                    <div class="team-name">{{ match.first_team }} - <a href="{{ match.second_team.get_absolute_url }}">{{ match.second_team }}</div>
                                </div>
                            </td>
                            <td>
                                <div class="person-name">Кубок грифонов</div>
                            </td>
                            <td>
                                <time><span class="match-day">{{ match.date|date:"d.m.Y"  }}</span> | <span class="match-time">{{ match.date|date:"G:i" }}</span></time>
                            </td>
                            <td class="score">{{ match.score_hometeam }} - {{ match.score_awayteam }}</td>
                        </tr>
                        {% elif match.score_hometeam < match.score_awayteam %}
                        <tr class="matches-row lose">
                            <td class="team-name">
                                <div class="flex-line">
                                    <img class="rival-logo" src="{{ match.second_team.logo.url }}" alt="">
                                    <div class="team-name">{{ match.first_team }} - <a href="{{ match.second_team.get_absolute_url }}">{{ match.second_team }}</div>
                                </div>
                            </td>
                            <td>
                                <div class="person-name">Кубок грифонов</div>
                            </td>
                            <td>
                                <time><span class="match-day">{{ match.date|date:"d.m.Y"  }}</span> | <span class="match-time">{{ match.date|date:"G:i" }}</span></time>
                            </td>
                            <td class="score">{{ match.score_hometeam }} - {{ match.score_awayteam }}</td>
                        </tr>
                        {% else %}
                        <tr class="matches-row draw">
                            <td class="team-name">
                                <div class="flex-line">
                                    <img class="rival-logo" src="{{ match.second_team.logo.url }}" alt="">
                                    <div class="team-name">{{ match.first_team }} - <a href="{{ match.second_team.get_absolute_url }}">{{ match.second_team }}</div>
                                </div>
                            </td>
                            <td>
                                <div class="person-name">Кубок грифонов</div>
                            </td>
                            <td>
                                <time><span class="match-day">{{ match.date|date:"d.m.Y"  }}</span> | <span class="match-time">{{ match.date|date:"G:i" }}</span></time>
                            </td>
                            <td class="score">{{ match.score_hometeam }} - {{ match.score_awayteam }}</td>
                        </tr>
                        {% endif %}                
                    {% endfor %}
                    {% for match in away_matches %}
                    {% if match.score_awayteam > match.score_hometeam %}
                    <tr class="matches-row win">
                        <td class="team-named">
                            <div class="flex-line">
                                <img class="rival-logo" src="{{ match.first_team.logo.url }}" alt="">
                                <div class="team-name"><a href="{{ match.first_team.get_absolute_url }}">{{ match.first_team }}</a> - {{ match.second_team }}</div>
                            </div>
                        </td>
                        <td>
                            <div class="person-name">Кубок грифонов</div>
                        </td>
                        <td>
                            <time><span class="match-day">{{ match.date|date:"d.m.Y"  }}</span> | <span class="match-time">{{ match.date|date:"G:i" }}</span></time>
                        </td>
                        <td class="score">{{ match.score_hometeam }} - {{ match.score_awayteam }}</td>
                    </tr>
                    {% elif match.score_awayteam < match.score_hometeam %}
                    <tr class="matches-row lose">
                        <td class="team-named">
                            <div class="flex-line">
                                <img class="rival-logo" src="{{ match.first_team.logo.url }}" alt="">
                                <div class="team-name"><a href="{{ match.first_team.get_absolute_url }}">{{ match.first_team }}</a> - {{ match.second_team }}</div>
                            </div>
                        </td>
                        <td>
                            <div class="person-name">Кубок грифонов</div>
                        </td>
                        <td>
                            <time><span class="match-day">{{ match.date|date:"d.m.Y"  }}</span> | <span class="match-time">{{ match.date|date:"G:i" }}</span></time>
                        </td>
                        <td class="score">{{ match.score_hometeam }} - {{ match.score_awayteam }}</td>
                    </tr>
                    {% else %}
                    <tr class="matches-row draw">
                        <td class="team-named">
                            <div class="flex-line">
                                <img class="rival-logo" src="{{ match.first_team.logo.url }}" alt="">
                                <div class="team-name"><a href="{{ match.first_team.get_absolute_url }}">{{ match.first_team }}</a> - {{ match.second_team }}</div>
                            </div>
                        </td>
                        <td>
                            <div class="person-name">Кубок грифонов</div>
                        </td>
                        <td>
                            <time><span class="match-day">{{ match.date|date:"d.m.Y"  }}</span> | <span class="match-time">{{ match.date|date:"G:i" }}</span></time>
                        </td>
                        <td class="score">{{ match.score_hometeam }} - {{ match.score_awayteam }}</td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>
</main>
{% endblock main %}